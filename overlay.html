<!DOCTYPE html>
  <html>
    <head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Geek Overlay</title>
    <style>
		@import url('https://fonts.googleapis.com/css?family=Press+Start+2P|Roboto');
#container{
  width: 800px;
  top: 570px;
  left: 80px;
  position: absolute;
}
#logo{
  width: 300px;
  position: absolute; 
  top: 400px;
  left: -45px;
  z-index: 999;
}
.frame{
width: 800px;
height: 450px;
border: 20px solid #CF7AAF;
position: absolute;
top: 100px;
left: 100px;
}
.lines{
  width: 100%;
  font-family: 'Press Start 2P';
  color: #fff;
  position: absolute;
  left: 0;
  top: 0;
  
}
.vertOne{
	background: #B15299;
	width: 20px;
	height: 480px;
	position: absolute;
	left: 80px; 
	top: 120px;
	z-index: 777;
}
.vertTwo{
	background: #8D398C;
	width: 20px;
	height: 480px;
	position: absolute;
	left: 60px; 
	top: 140px;
	z-index: 777;
}
.line{
  height: 20px;
  background: #efefef;
}
.lines p{
position: absolute;
top: 0;
margin: 0;
text-align: left;
opacity: 0;
width: 800px;
text-align: center;
font-size: 30px;
line-height: 60px;
text-transform: uppercase;
}
.lines p img{
width: 100px;
height: 60px;
vertical-align: top;
}

/* DONO */
#topDonation .line.one{
  background: #CF7AAF;
  width: 0%;
  animation: 30s slide ease-out forwards infinite; 
}
#topDonation .line.two{
  background: #B15299;
  width: 0%;
  padding-right: 40px;
  animation: 30s slide .25s ease-out forwards infinite;
}
#topDonation .line.three{
  background: #8D398C;
  width: 0%;
  padding-right: 20px;
  animation: 30s slide .5s ease-out forwards infinite;
}
#topDonation.lines p{
animation: 30s fade ease-out forwards infinite;
}

/* rDONO */
#rDonation .line.one{
  background: #CF7AAF;
  width: 0%;
  animation: 30s slide 6s ease-out forwards infinite; 
}
#rDonation .line.two{
  background: #B15299;
  width: 0%;
  padding-right: 40px;
  animation: 30s slide 6.25s ease-out forwards infinite;
}
#rDonation .line.three{
  background: #8D398C;
  width: 0%;
  padding-right: 20px;
  animation: 30s slide 6.5s ease-out forwards infinite;
}
#rDonation.lines p{
animation: 30s fade 6s ease-out forwards infinite;
}

/* BITS */
#topBits .line.one{
  background: #CF7AAF;
  width: 0%;
  animation: 30s slide 12s ease-out forwards infinite; 
}
#topBits .line.two{
  background: #B15299;
  width: 0%;
  padding-right: 40px;
  animation: 30s slide 12.25s ease-out forwards infinite;
}
#topBits .line.three{
  background: #8D398C;
  width: 0%;
  padding-right: 20px;
  animation: 30s slide 12.5s ease-out forwards infinite;
}
#topBits.lines p{
animation: 30s fade 12s ease-out forwards infinite;
}

/* rBITS */
#rBits .line.one{
  background: #CF7AAF;
  width: 0%;
  animation: 30s slide 18s ease-out forwards infinite; 
}
#rBits .line.two{
  background: #B15299;
  width: 0%;
  padding-right: 40px;
  animation: 30s slide 18.25s ease-out forwards infinite;
}
#rBits .line.three{
  background: #8D398C;
  width: 0%;
  padding-right: 20px;
  animation: 30s slide 18.5s ease-out forwards infinite;
}
#rBits.lines p{
animation: 30s fade 18s ease-out forwards infinite;
}

/* rSUB */
#rSub .line.one{
  background: #CF7AAF;
  width: 0%;
  animation: 30s slide 24s ease-out forwards infinite; 
}
#rSub .line.two{
  background: #B15299;
  width: 0%;
  padding-right: 40px;
  animation: 30s slide 24.25s ease-out forwards infinite;
}
#rSub .line.three{
  background: #8D398C;
  width: 0%;
  padding-right: 20px;
  animation: 30s slide 24.5s ease-out forwards infinite;
}
#rSub.lines p{
animation: 30s fade 24s ease-out forwards infinite;
}
.content{
	font-family: 'Roboto';
	 letter-spacing: 1.5px;
	 font-size: 25px;
	 text-transform: uppercase;
}
@keyframes slide{
  0%{
    width: 0%;
  }
  1%{
  width: 100%;
  }
  15%{
   width: 100%;
  }
  16%{
    width: 0%;
  }
  100%{
    width: 0%;
  }
}
@keyframes fade{
  0%{
    opacity: 0;
  }
  2%{
    opacity: 0;
  }
  3%{
  opacity: 1;
  }
  15%{
   opacity: 1;
  }
  16%{
    opacity: 0;
  }
  100%{
    opacity: 0;
  }
}
    </style>
    </head>
    <body>
		<div class="vertOne"></div>
		<div class="vertTwo"></div>
		<div class="frame"></div>
		<img id="logo" src="lib/GEEKOVERLAY.png" />
		<div id="container">
		  
		  <div class="lines" id="topDonation">
			<p><img src="lib/social_pixTwitch.png" />thegeekchick</p>
			<div class="line one"></div>
			<div class="line two"></div>
			<div class="line three"></div>
			
		  </div>
		  
		  <div class="lines" id="rDonation">
			<p><img src="lib/social_pixfacebook.png" />geekchicktv</p>
			<div class="line one"></div>
			<div class="line two"></div>
			<div class="line three"></div>
			
		  </div>
		  
		  <div class="lines" id="topBits">
			<p><img src="lib/social_pixTwitter.png" />geekchicktv</p>
			<div class="line one"></div>
			<div class="line two"></div>
			<div class="line three"></div>
			
		  </div>
		  
		  <div class="lines" id="rBits">
			<p><img src="lib/social_pixyt.png" />TheGeekChick</p>
			<div class="line one"></div>
			<div class="line two"></div>
			<div class="line three"></div>
			
		  </div>
		  
		  <div class="lines" id="rSub">
			<p><img src="lib/social_pixInsta.png" />geekchicktv</p>
			<div class="line one"></div>
			<div class="line two"></div>
			<div class="line three"></div>
			
		  </div>
		</div>
    </body>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js' type='text/javascript'></script>
	<script type = 'text/javascript'>
		var topD = 0;
		var topB = 0;
		
		// SOCKET TOKEN
		const socketToken = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbiI6IjFERjc5RkVGRkE2QTJBOTIwOTEyIiwicmVhZF9vbmx5Ijp0cnVlLCJwcmV2ZW50X21hc3RlciI6dHJ1ZSwidHdpdGNoX2lkIjoiMTExMDc5Mzg5In0.JX6BN5JBP_quimXlKJvdPDfY0X_u9-ITTX0UwWodjrs'; 
		  
		//Connect to socket
		const streamlabs = io(`https://sockets.streamlabs.com?token=${socketToken}`, {transports: ['websocket']});
		  
		//Perform Action on event
		streamlabs.on('event', (eventData) => {

				  console.log(eventData);
				  
				  
				  if (eventData.type == 'subscription'){
					$('#recSub').html(eventData.message[0].name)
				  }
				  if (eventData.type == 'donation'){
					$('#recDono').html(eventData.message[0].name + ' ' + eventData.message[0].formatted_amount)
					
					if (eventData.message[0].amount > topD){
					topD = eventData.message[0].amount
					$('#topDono').html(eventData.message[0].name + ' ' + eventData.message[0].formatted_amount)
					}
				  }
				  if (eventData.type == 'bits'){
					$('#recBit').html(eventData.message[0].name + ' ' + eventData.message[0].amount + 'bits')
					
					if (parseInt(eventData.message[0].amount) > topB){
					topB = parseInt(eventData.message[0].amount)
					$('#topBit').html(eventData.message[0].name + ' ' + eventData.message[0].amount + 'bits')
					}
				  }
				 
		});
	</script>
  </html>
